function bdaterange_start(b,a){let c=document.getElementById(a.id_start),e=document.getElementById(a.id_end);$(c).data("range_type","normal");let f={element:c,css:["lib/independent/css/easepick.css"],header:a.title,zIndex:a.zIndex,grid:a.grid,calendars:a.calendars,readonly:!1,autoApply:a.autoApply,plugins:["RangePlugin","LockPlugin"],lang:a.language,format:a.format,locale:{cancel:"pt"==a.language?"Cancelar":"Cancel",apply:"pt"==a.language?"Aplicar":"Apply"},setup(d){d.on("select",h=>{a.changeaction&&
eval(a.changeaction)})},RangePlugin:{delimiter:a.separator,tooltipNumber:d=>d-1,locale:a.locale??{one:"pt"==a.language?"Dia":"Day",other:"pt"==a.language?"Dias":"Days"}}};a.time&&(f.plugins.push("TimePlugin"),f.TimePlugin={seconds:a.seconds,format:"HH:mm:ss",stepSeconds:a.stepSeconds,stepHours:a.stepHours,stepMinutes:a.stepMinutes});a.id_end&&($(c).data("range_type","start"),$(e).data("range_type","end"),f.RangePlugin.elementEnd=e);if(a.enableDates||a.disableDates)f.LockPlugin={minDate:new Date,minDays:1,
inseparable:!0,filter(d){if(a.enableDates)return!a.enableDates.includes(d.format("YYYY-MM-DD"));if(a.disableDates)return a.disableDates.includes(d.format("YYYY-MM-DD"))}};const g=new easepick.create(f);$(c).on("change",function(){if(this.value)g.setStartDate(this.value);else{let d=$(e).val();g.clear();e&&d&&g.setEndDate(d)}a.changeaction&&eval(a.changeaction)});$(e).on("change",function(){if(this.value)g.setEndDate(this.value);else{let d=$(c).val();g.clear();d&&g.setStartDate(d)}a.changeaction&&eval(a.changeaction)});
$("#"+b).data("picker",g)}function bdaterange_disable_field(b,a){let c=$("form[name="+b+"] [id="+a+"]");0==c.length&&(c=$("form[name="+b+"] [name="+a+"]").closest(".bdaterange-container"));c.find(".bdaterange-icon").hide();c.find("input").addClass("tfield_disabled")}
function bdaterange_enable_field(b,a){let c=$("form[name="+b+"] [id="+a+"]");0==c.length&&(c=$("form[name="+b+"] [name="+a+"]").closest(".bdaterange-container"));c.find(".bdaterange-icon").show();c.find("input").removeClass("tfield_disabled")}
function bdaterange_set_value(b,a){"normal"==$(b).data("range_type")?$(b).closest(".bdaterange-container").data("picker").setDateRange(a):"end"==$(b).data("range_type")?$(b).closest(".bdaterange-container").data("picker").setEndDate(a):"start"==$(b).data("range_type")&&$(b).closest(".bdaterange-container").data("picker").setStartDate(a);$(b).val(a)};function btreeview_start(b,a){if(a)$(`#${b} .btreeview-group-name, #${b} .btreeview-group-icon`).on("click",function(c){$(this).closest(".btreeview-group").toggleClass("btreeview-open")})}function btreeview_toggle_all(b,a){b.stopPropagation();$(a).closest(".btreeview-group").find(".btreeview-group-items").find("[type=checkbox]").prop("checked",$(a).is(":checked"))}
function btreeview_add_option(b,a,c,e,f){c=$("form[name="+b+"] [btreeview="+a+'] .btreeview-group[id="'+c+'"]');b=c.find(".btreeview-group-items .btreeview-item:first").clone();a=b.attr("data-id");console.log(b,c,a);b.find(".btreeview-checkbox-item").attr("value",e);b.find("span").html(f);b.attr("data-id",e);c.find(".btreeview-group-items").append(b)}function btreeview_reload(b,a,c){$("form[name="+b+"] [btreeview="+a+"]").replaceWith(base64_decode(c))};
function tselectcheck_start(e,t){$(e).removeAttr("onchange");let c=$(e).select2({allowClear:!0,multiple:!0,closeOnSelect:!1,placeholder:t,templateSelection:function(e,t){return e.id,e.text},templateResult:function(e){if(e.loading)return e.text;var t=$('<div class="select2-result-item">'+("OPTGROUP"===e.element.tagName?"":'<input type="checkbox" class="select2-result-item__checkbox" onclick="return false;">')+'<span class="select2-result-item__text">'+e.text+"</span></div>"),c=$(e.element).is(":selected");return t.find('input[type="checkbox"]').prop("checked",c),t}}).on("change",function(t){$(e).attr("changeaction")&&Function($(e).attr("changeaction"))()}),s=$(e).next(".select2-container");s.find(".select2-selection__arrow").length||s.find(".select2-selection").append('<span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),c.on("select2:select select2:unselect select2:clear",function(){bselectcheck_update_summary(this,t)}),bselectcheck_update_summary(e,t),c.data("select2").$dropdown.addClass("bselectcheck"),c.data("select2").$container.addClass("bselectcheck-container"),c.on("select2:open",function(){let e=c.data("select2").$dropdown,s=$(this).next(".select2-container").outerWidth();e.css("width",s+"px"),e.find(".bselectcheck-custom-dropdown-header").remove();var n=$('<input type="text" class="bselectcheck-custom-search-input">'),l=$('<div class="bselectcheck-buttons-container"></div>'),i=$('<span  class="bselectcheck-btn btn btn-default btn-sm pull-left"> <i class="far fa-check-square" style=";padding-right:4px"></i> </button>'),a=$('<span  class="bselectcheck-btn btn btn-default btn-sm pull-left"><i class="far fa-square" style=";padding-right:4px"></i></button>'),o=$('<span  class="bselectcheck-btn btn btn-default btn-sm pull-left"><i class="fas fa-retweet" style=";padding-right:4px"></i></button>');l.append(i,a,o);var r=$('<div class="bselectcheck-custom-dropdown-header"></div>').append(n).append(l);e.prepend(r),i.on("click",function(s){s.preventDefault(),s.stopPropagation(),c.find("option").prop("selected",!0),c.trigger("change.select2"),e.find(".select2-results__option").attr("aria-selected","true"),e.find('.select2-results__option:visible input[type="checkbox"]').prop("checked",!0).change(),bselectcheck_update_summary(c,t)}),a.on("click",function(s){s.preventDefault(),s.stopPropagation(),c.find("option").prop("selected",!1),c.trigger("change.select2"),e.find(".select2-results__option").attr("aria-selected","false"),e.find('.select2-results__option:visible input[type="checkbox"]').prop("checked",!1),bselectcheck_update_summary(c,t)}),o.on("click",function(s){s.preventDefault(),s.stopPropagation(),c.find("option").each(function(){let e=!$(this).prop("selected");$(this).prop("selected",e)}),c.trigger("change.select2"),e.find('.select2-results__option:visible input[type="checkbox"]').each(function(){let e=!$(this).prop("checked");$(this).prop("checked",e),$(this).closest(".select2-results__option").attr("aria-selected",e?"true":"false")}),bselectcheck_update_summary(c,t)}),n.on("input",function(){var t=$(this).val().toLowerCase();e.find(".select2-results__options li").each(function(){!$(this).hasClass("select2-results__message")&&($(this).text().toLowerCase().includes(t)?$(this).show():$(this).hide())})}),setTimeout(function(){n.focus()},0)}),c.on("select2:select select2:unselect",function(e){var t=e.params.data.selected;void 0!==e.params.originalEvent&&$(e.params.originalEvent.currentTarget).find('input[type="checkbox"]').prop("checked",t)}),c.on("select2:clearing",function(e){var c=$(this).next(".select2-container");setTimeout(function(){c.find(".select2-selection__rendered").html('<li class="select2-selection__placeholder">'+t+"</li>")})})}function bselectcheck_update_summary(e,t){let c=$(e),s=c.select2("data"),n=s?.length,l=c.next(".select2-container"),i=l.find(".select2-selection__rendered");if(0===n)i.find("li:not(.select2-search--inline)").remove(),i.prepend(`<li class="select2-selection__placeholder">${t}</li>`);else{let{visibleText:a,remainingCount:o}=bselectcheck_calculate_visible_items(l,s),r=a;o>0&&(r+=` (+${o} itens)`),i.find("li:not(.select2-search--inline)").remove(),i.prepend(`<span style="width: 100%;max-width: 100%;"class="select2-selection__choice">${r}</span>`)}}function bselectcheck_calculate_visible_items(e,t){let c=$("<span>").css({"font-size":e.css("font-size"),"font-family":e.css("font-family"),visibility:"hidden",position:"absolute","white-space":"nowrap"}).appendTo("body"),s=e.width()-80,n=[],l=0,i=t?.filter(e=>e&&e.text?.trim());for(let a=0;a<i?.length;a++){let o=0===n.length?i[a].text.trim():n.join(", ")+", "+i[a].text.trim(),r=a<i.length-1?o+` (+${i.length-a-1} itens)`:o;if(c.text(r),s<c.width()){l=i.length-a;break}n.push(i[a].text.trim())}return c.remove(),{visibleText:n.length>0?n.join(", "):"",remainingCount:l}}